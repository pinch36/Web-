<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>学生注册</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>

    <style>
        * {
            font-family: "Poppins";
        }

        body {
            user-select: none;
            /*overflow-y: hidden;*/
            overflow-y: auto; /* 允许垂直滚动 */
            display: flex;
            justify-content: center;
            align-items: center;
            background: #dde5f4;
            height: 100vh;
        }

        .screen-1 {
            width: 500px;
            height: 1000px;
            background: #f1f7fe;
            padding: 2em;
            display: flex;
            flex-direction: column;
            border-radius: 30px;
            box-shadow: 0 0 2em #e6e9f9;
            /*gap: 1em;*/
        }

        .screen-1 .logo {
            height: 150px;
            margin-top: -3em;
            margin-left: 5em;
        }

        .screen-1 .input-group {
            background: white;
            box-shadow: 0 0 2em #e6e9f9;
            padding: 1em;
            display: flex;
            flex-direction: column;
            gap: 0.5em;
            border-radius: 20px;
            color: #4d4d4d;
            margin-top: 1em;
        }

        .screen-1 .input-group input {
            outline: none;
            border: none;
            width: 400px;
        }

        .screen-1 .input-group input::placeholder {
            color: black;
            font-size: 0.9em;
        }

        .screen-1 .input-group ion-icon {
            color: #4d4d4d;
            margin-bottom: -0.2em;
        }

        .screen-1 .password .show-hide {
            margin-right: -5em;
            cursor: pointer;
        }

        .screen-1 .register {
            padding: 1em;
            background: #3e4684;
            color: white;
            border: none;
            border-radius: 30px;
            font-weight: 600;
        }

        .screen-1 .reset {
            padding: 1em;
            background: #A6B1E1;
            color: white;
            border: none;
            border-radius: 30px;
            font-weight: 600;
        }

        .result {
            text-align: right;
            font-size: xx-small;
            float: right;
            clear: right;
            color: red;
        }

        button {
            cursor: pointer;
            /*margin: 2em;*/
            margin-top: 2em;
        }
    </style>
</head>
<body>
<div class="screen-1">
    <svg class="logo" xmlns="http://www.w3.org/2000/svg" version="1.1" width="300" height="300"
         viewbox="0 0 640 480" xml:space="preserve">
    <g transform="matrix(3.31 0 0 3.31 320.4 240.4)">
      <circle style="stroke: rgb(0,0,0); stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(61,71,133); fill-rule: nonzero; opacity: 1;"
              cx="0" cy="0" r="40"></circle>
    </g>
        <g transform="matrix(0.98 0 0 0.98 268.7 213.7)">
      <circle style="stroke: rgb(0,0,0); stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(255,255,255); fill-rule: nonzero; opacity: 1;"
              cx="0" cy="0" r="40"></circle>
    </g>
        <g transform="matrix(1.01 0 0 1.01 362.9 210.9)">
      <circle style="stroke: rgb(0,0,0); stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(255,255,255); fill-rule: nonzero; opacity: 1;"
              cx="0" cy="0" r="40"></circle>
    </g>
        <g transform="matrix(0.92 0 0 0.92 318.5 286.5)">
      <circle style="stroke: rgb(0,0,0); stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(255,255,255); fill-rule: nonzero; opacity: 1;"
              cx="0" cy="0" r="40"></circle>
    </g>
        <g transform="matrix(0.16 -0.12 0.49 0.66 290.57 243.57)">
      <polygon
              style="stroke: rgb(0,0,0); stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(255,255,255); fill-rule: nonzero; opacity: 1;"
              points="-50,-50 -50,50 50,50 50,-50 "></polygon>
    </g>
        <g transform="matrix(0.16 0.1 -0.44 0.69 342.03 248.34)">
      <polygon
              style="stroke: rgb(0,0,0); stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(255,255,255); fill-rule: nonzero; opacity: 1;"
              vector-effect="non-scaling-stroke" points="-50,-50 -50,50 50,50 50,-50 "></polygon>
    </g>
  </svg>
    <div class="input-group account">
        <label for="account" style="font-weight: bold;">学 号</label>
        <div class="sec-2">
            <ion-icon name="person-outline"></ion-icon>
            <input id="account" type="text" name="account" placeholder="请输入学号"/>
        </div>
        <!-- 提示信息 -->
        <span class="result" id="account-error"></span>
    </div>
    <div class="input-group password">
        <label for="password" style="font-weight: bold;">密 码</label>
        <div class="sec-2">
            <ion-icon name="lock-closed-outline"></ion-icon>
            <input id="password" class="pas" type="password" name="password" placeholder="请输入密码"/>
            <ion-icon class="show-hide" name="eye-outline"></ion-icon>
        </div>
        <!-- 提示信息 -->
        <span class="result" id="password-error"></span>
    </div>
    <div class="input-group name">
        <label for="name" style="font-weight: bold;">姓名</label>
        <div class="sec-2">
            <ion-icon name="person-circle-outline"></ion-icon>
            <input id="name" type="text" name="name" placeholder="请输入姓名"/>
        </div>
        <!-- 提示信息 -->
        <span class="result" id="name-error"></span>
    </div>
    <div class="input-group idnumber">
        <label for="idnumber" style="font-weight: bold;">身份证号</label>
        <div class="sec-2">
            <ion-icon name="card-outline"></ion-icon>
            <input id="idnumber" type="text" name="idnumber" placeholder="请输入身份证号"/>
        </div>
        <!-- 提示信息 -->
        <span class="result" id="idnumber-error"></span>
    </div>
    <div class="input-group phone">
        <label for="phone" style="font-weight: bold;">手机号码</label>
        <div class="sec-2">
            <ion-icon name="call-outline"></ion-icon>
            <input id="phone" type="text" name="phone" placeholder="请输入手机号码"/>
        </div>
        <!-- 提示信息 -->
        <span class="result" id="phone-error"></span>
    </div>
    <div class="input-group email">
        <label for="email" style="font-weight: bold;">邮箱</label>
        <div class="sec-2">
            <ion-icon name="mail-outline"></ion-icon>
            <input id="email" type="text" name="email" placeholder="请输入邮箱"/>
        </div>
        <!-- 提示信息 -->
        <span class="result" id="email-error"></span>
    </div>
    <button class="register" onclick="validateForm()">注册</button>
    <button class="reset" onclick="resetForm()">重置</button>
</div>

<script>
    const accountInput = document.getElementById('account');
    const passwordInput = document.getElementById('password');
    const idnumberInput = document.getElementById('idnumber');
    const nameInput = document.getElementById('name');
    const phoneInput = document.getElementById('phone');
    const emailInput = document.getElementById('email');
    const accountError = document.getElementById('account-error');
    const passwordError = document.getElementById('password-error');
    const idnumberError = document.getElementById('idnumber-error');
    const nameError = document.getElementById('name-error');
    const phoneError = document.getElementById('phone-error');
    const emailError = document.getElementById('email-error');

    // 显示和隐藏密码
    document.querySelector('.show-hide').addEventListener('click', function () {
        const passwordField = document.querySelector('.pas');
        const icon = this;
        if (passwordField.type === 'password') {
            passwordField.type = 'text';
            icon.name = 'eye-off-outline';
        } else {
            passwordField.type = 'password';
            icon.name = 'eye-outline';
        }
    });

    function validateForm() {
        // 清空之前的错误信息
        accountError.textContent = '';
        passwordError.textContent = '';
        idnumberError.textContent = '';
        nameError.textContent = '';
        phoneError.textContent = '';
        emailError.textContent = '';

        // 获取输入值
        const account = accountInput.value.trim();
        const password = passwordInput.value.trim();
        const idnumber = idnumberInput.value.trim();
        const name = nameInput.value.trim();
        const phone = phoneInput.value.trim();
        const email = emailInput.value.trim();

        // 验证标志
        let isValid = true;

        // 验证学号
        if (!account) {
            accountError.textContent = '学号不能为空';
            isValid = false;
        } else if (!validateAccount(account)) {
            isValid = false;
        }

        // 验证密码
        if (!password) {
            passwordError.textContent = '密码不能为空';
            isValid = false;
        } else if (!validatePassword(password)) {
            isValid = false;
        }

        // 验证身份证号
        if (!idnumber) {
            idnumberError.textContent = '身份证号不能为空';
            isValid = false;
        } else if (!validateIdNumber(idnumber)) {
            idnumberError.textContent = '无效的身份证号';
            isValid = false;
        }

        // 验证姓名
        if (!name) {
            nameError.textContent = '姓名不能为空';
            isValid = false;
        } else if (!/^[\u4e00-\u9fa5]{1,10}$/.test(name)) {
            nameError.textContent = '姓名必须是十位以内的中文字符';
            isValid = false;
        }

        // 验证手机号码
        if (!phone) {
            phoneError.textContent = '手机号码不能为空';
            isValid = false;
        } else if (!validatePhone(phone)) {
            phoneError.textContent = '手机号码应为11位数字';
            isValid = false;
        }

        // 验证邮箱
        if (!email) {
            emailError.textContent = '邮箱不能为空';
            isValid = false;
        } else if (!validateEmail(email)) {
            emailError.textContent = '无效的邮箱';
            isValid = false;
        }

        // 如果验证通过，弹出成功消息
        if (isValid) {
            Swal.fire({
                icon: 'success',
                title: '注册成功',
                text: '您的学号已成功注册！',
            });
        }
    }

    function resetForm() {
        Swal.fire({
            title: '确认重置表单吗？',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonText: '确认',
            cancelButtonText: '取消'
        }).then((result) => {
            if (result.isConfirmed) {
                // 清空输入框
                accountInput.value = '';
                passwordInput.value = '';
                idnumberInput.value = '';
                nameInput.value = '';
                phoneInput.value = '';
                emailInput.value = '';

                // 清空错误信息
                accountError.textContent = '';
                passwordError.textContent = '';
                idnumberError.textContent = '';
                nameError.textContent = '';
                phoneError.textContent = '';
                emailError.textContent = '';
                Swal.fire(
                    '已重置!',
                    '表单内容已被清空。',
                    'success'
                );
            }
        });

    }

    function validateIdNumber(idNumber) {
        // 这里是一个简单的身份证号验证逻辑，你可以根据需要进行调整
        const regex = /^\d{15}$|^\d{18}$|^\d{17}(\d|X|x)$/;
        return regex.test(idNumber);
    }

    function validatePhone(phone) {
        // 手机号码验证逻辑
        const regex = /^1[3-9]\d{9}$/;
        return regex.test(phone);
    }

    function validateEmail(email) {
        // 邮箱验证逻辑
        const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return regex.test(email);
    }

    let flag1, flag2;

    // 判断表单合法性
    function validateAccount(accountValue) {
        accountError.innerText = "";

        if (accountValue.length !== 10) {
            flag1 = false;
            if (accountError.innerText !== "")
                accountError.innerText += "，";
            accountError.innerText += "学号长度应为10位数字";
        }

        if (!/^[0-9]*$/.test(accountValue)) {
            flag1 = false;
            if (accountError.innerText !== "")
                accountError.innerText += "，";
            accountError.innerText += "学号仅能包含数字";
        }
    }

    // 判断表单合法性
    function validatePassword(passwordValue) {

        passwordError.innerText = ""; // 先清空错误提示

        let num = 0;
        if (/(?=.*\d)/.test(passwordValue))
            num++;
        if (/(?=.*[a-z])/.test(passwordValue) || /(?=.*[A-Z])/.test(passwordValue))
            num++;
        if (/(?=.*[!@#$%^&*.])/.test(passwordValue))
            num++;

        //用^和$包起来才是整个字符串完全匹配
        if (!/^[a-zA-Z\d!@#$%^&*.]{8,20}$/.test(passwordValue) && num < 2) {
            flag2 = false;
            passwordError.innerText = "密码长度应为8-20个字符，且密码需同时包含字母、数字或特殊字符两种及以上";
            return;
        }

        if (!/^[a-zA-Z\d!@#$%^&*.]{8,20}$/.test(passwordValue)) {
            flag2 = false;
            passwordError.innerText += "密码长度应为8-20个字符";
        }

        // 检查密码是否包含字母、数字或特殊字符中的两种及以上
        if (num < 2) {
            flag2 = false;
            if (passwordError.innerText !== "")
                passwordError.innerText += "，";
            passwordError.innerText += "密码需同时包含字母、数字或特殊字符两种及以上";
        }
    }
</script>
</body>
</html>
